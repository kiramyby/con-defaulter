{
  "openapi": "3.0.0",
  "info": {
    "title": "违约客户管理系统 API",
    "version": "1.0.0",
    "description": "违约客户管理系统的RESTful API接口文档",
    "contact": {
      "name": "API Support",
      "email": "support@example.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3001/api/v1",
      "description": "开发环境"
    }
  ],
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "DefaultReason": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "违约原因ID"
          },
          "reason": {
            "type": "string",
            "description": "违约原因名称"
          },
          "detail": {
            "type": "string",
            "description": "详细描述"
          },
          "enabled": {
            "type": "boolean",
            "description": "是否启用"
          },
          "sortOrder": {
            "type": "number",
            "description": "排序顺序"
          },
          "createTime": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updateTime": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "DefaultApplication": {
        "type": "object",
        "properties": {
          "applicationId": {
            "type": "string",
            "description": "申请ID"
          },
          "customerId": {
            "type": "number",
            "description": "客户ID"
          },
          "customerName": {
            "type": "string",
            "description": "客户名称"
          },
          "applicant": {
            "type": "string",
            "description": "申请人"
          },
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "APPROVED",
              "REJECTED"
            ],
            "description": "申请状态"
          },
          "severity": {
            "type": "string",
            "enum": [
              "HIGH",
              "MEDIUM",
              "LOW"
            ],
            "description": "严重程度"
          },
          "defaultReasons": {
            "type": "array",
            "items": {
              "type": "number"
            },
            "description": "违约原因ID列表"
          },
          "createTime": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "latestExternalRating": {
            "type": "string",
            "description": "最新外部评级"
          }
        }
      },
      "DefaultCustomer": {
        "type": "object",
        "properties": {
          "customerId": {
            "type": "number",
            "description": "客户ID"
          },
          "customerName": {
            "type": "string",
            "description": "客户名称"
          },
          "status": {
            "type": "string",
            "description": "客户状态"
          },
          "defaultReasons": {
            "type": "array",
            "items": {
              "type": "number"
            },
            "description": "违约原因ID列表"
          },
          "severity": {
            "type": "string",
            "enum": [
              "HIGH",
              "MEDIUM",
              "LOW"
            ],
            "description": "严重程度"
          },
          "applicant": {
            "type": "string",
            "description": "申请人"
          },
          "applicationTime": {
            "type": "string",
            "format": "date-time",
            "description": "申请时间"
          },
          "approveTime": {
            "type": "string",
            "format": "date-time",
            "description": "审核时间"
          },
          "latestExternalRating": {
            "type": "string",
            "description": "最新外部评级"
          }
        }
      },
      "RenewalReason": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "重生原因ID"
          },
          "reason": {
            "type": "string",
            "description": "重生原因名称"
          },
          "enabled": {
            "type": "boolean",
            "description": "是否启用"
          }
        }
      },
      "Renewal": {
        "type": "object",
        "properties": {
          "renewalId": {
            "type": "string",
            "description": "重生申请ID"
          },
          "customerId": {
            "type": "number",
            "description": "客户ID"
          },
          "customerName": {
            "type": "string",
            "description": "客户名称"
          },
          "renewalReason": {
            "type": "object",
            "properties": {
              "id": {
                "type": "number",
                "description": "重生原因ID"
              },
              "reason": {
                "type": "string",
                "description": "重生原因名称"
              }
            }
          },
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "APPROVED",
              "REJECTED"
            ],
            "description": "申请状态"
          },
          "remark": {
            "type": "string",
            "description": "申请备注"
          },
          "applicant": {
            "type": "string",
            "description": "申请人"
          },
          "createTime": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "approver": {
            "type": "string",
            "description": "审核人"
          },
          "approveTime": {
            "type": "string",
            "format": "date-time",
            "description": "审核时间"
          },
          "approveRemark": {
            "type": "string",
            "description": "审核备注"
          }
        }
      },
      "RenewalDetail": {
        "type": "object",
        "properties": {
          "renewalId": {
            "type": "string",
            "description": "重生申请ID"
          },
          "customerId": {
            "type": "number",
            "description": "客户ID"
          },
          "customerName": {
            "type": "string",
            "description": "客户名称"
          },
          "customerInfo": {
            "type": "object",
            "properties": {
              "industry": {
                "type": "string",
                "description": "行业"
              },
              "region": {
                "type": "string",
                "description": "地区"
              },
              "latestExternalRating": {
                "type": "string",
                "description": "最新外部评级"
              }
            }
          },
          "renewalReason": {
            "type": "object",
            "properties": {
              "id": {
                "type": "number",
                "description": "重生原因ID"
              },
              "reason": {
                "type": "string",
                "description": "重生原因名称"
              }
            }
          },
          "originalDefaultReasons": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "number",
                  "description": "违约原因ID"
                },
                "reason": {
                  "type": "string",
                  "description": "违约原因名称"
                }
              }
            },
            "description": "原违约原因列表"
          },
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "APPROVED",
              "REJECTED"
            ],
            "description": "申请状态"
          },
          "remark": {
            "type": "string",
            "description": "申请备注"
          },
          "applicant": {
            "type": "string",
            "description": "申请人"
          },
          "createTime": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "approver": {
            "type": "string",
            "description": "审核人"
          },
          "approveTime": {
            "type": "string",
            "format": "date-time",
            "description": "审核时间"
          },
          "approveRemark": {
            "type": "string",
            "description": "审核备注"
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "description": "用户ID"
          },
          "username": {
            "type": "string",
            "description": "用户名"
          },
          "realName": {
            "type": "string",
            "description": "真实姓名"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "邮箱地址"
          },
          "phone": {
            "type": "string",
            "description": "手机号码"
          },
          "role": {
            "type": "string",
            "enum": [
              "ADMIN",
              "OPERATOR",
              "AUDITOR"
            ],
            "description": "用户角色"
          },
          "status": {
            "type": "string",
            "enum": [
              "ACTIVE",
              "INACTIVE"
            ],
            "description": "用户状态"
          },
          "department": {
            "type": "string",
            "description": "部门"
          },
          "createTime": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updateTime": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          },
          "lastLoginTime": {
            "type": "string",
            "format": "date-time",
            "description": "最后登录时间"
          },
          "createdBy": {
            "type": "string",
            "description": "创建人"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "code": {
            "type": "number",
            "description": "错误代码"
          },
          "message": {
            "type": "string",
            "description": "错误信息"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "时间戳"
          }
        }
      },
      "PaginatedResponse": {
        "type": "object",
        "properties": {
          "total": {
            "type": "number",
            "description": "总记录数"
          },
          "page": {
            "type": "number",
            "description": "当前页码"
          },
          "size": {
            "type": "number",
            "description": "每页大小"
          },
          "list": {
            "type": "array",
            "items": {},
            "description": "数据列表"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "系统",
      "description": "系统相关接口"
    },
    {
      "name": "认证管理",
      "description": "用户登录、登出、令牌管理等认证相关接口"
    },
    {
      "name": "用户管理",
      "description": "系统用户的查询和管理"
    },
    {
      "name": "违约原因管理",
      "description": "违约原因的CRUD操作"
    },
    {
      "name": "违约认定申请",
      "description": "违约认定申请的管理"
    },
    {
      "name": "违约客户查询",
      "description": "违约客户的查询和导出"
    },
    {
      "name": "违约重生管理",
      "description": "违约客户重生申请管理"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "系统"
        ],
        "summary": "健康检查",
        "description": "检查API服务是否正常运行",
        "responses": {
          "200": {
            "description": "服务正常",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "认证管理"
        ],
        "summary": "用户登录",
        "description": "用户邮箱密码登录，获取JWT令牌",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "用户邮箱"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "description": "用户密码"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "登录成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "登录成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "access_token": {
                          "type": "string",
                          "description": "访问令牌"
                        },
                        "refresh_token": {
                          "type": "string",
                          "description": "刷新令牌"
                        },
                        "expires_in": {
                          "type": "number",
                          "description": "令牌过期时间（秒）"
                        },
                        "token_type": {
                          "type": "string",
                          "example": "bearer"
                        },
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string"
                            },
                            "email": {
                              "type": "string"
                            },
                            "dbId": {
                              "type": "number"
                            },
                            "username": {
                              "type": "string"
                            },
                            "realName": {
                              "type": "string"
                            },
                            "role": {
                              "type": "string",
                              "enum": [
                                "ADMIN",
                                "OPERATOR",
                                "AUDITOR"
                              ]
                            },
                            "status": {
                              "type": "string",
                              "enum": [
                                "ACTIVE",
                                "INACTIVE"
                              ]
                            },
                            "department": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "邮箱或密码错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "用户已被禁用",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": [
          "认证管理"
        ],
        "summary": "用户登出",
        "description": "用户登出，使令牌失效",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "登出成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "登出成功"
                    },
                    "data": {
                      "type": "object",
                      "nullable": true,
                      "example": null
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/refresh": {
      "post": {
        "tags": [
          "认证管理"
        ],
        "summary": "刷新访问令牌",
        "description": "使用刷新令牌获取新的访问令牌",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "refresh_token"
                ],
                "properties": {
                  "refresh_token": {
                    "type": "string",
                    "description": "刷新令牌"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "刷新成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "刷新成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "access_token": {
                          "type": "string"
                        },
                        "refresh_token": {
                          "type": "string"
                        },
                        "expires_in": {
                          "type": "number"
                        },
                        "token_type": {
                          "type": "string"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "刷新令牌无效或已过期",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/auth/profile": {
      "get": {
        "tags": [
          "认证管理"
        ],
        "summary": "获取当前用户信息",
        "description": "获取当前登录用户的详细信息",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "获取成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string"
                        },
                        "dbId": {
                          "type": "number"
                        },
                        "username": {
                          "type": "string"
                        },
                        "realName": {
                          "type": "string"
                        },
                        "role": {
                          "type": "string",
                          "enum": [
                            "ADMIN",
                            "OPERATOR",
                            "AUDITOR"
                          ]
                        },
                        "status": {
                          "type": "string"
                        },
                        "department": {
                          "type": "string"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未登录",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "tags": [
          "认证管理"
        ],
        "summary": "用户注册",
        "description": "创建新用户账号，只有ADMIN可以创建",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "username",
                  "realName",
                  "email",
                  "role",
                  "password"
                ],
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "用户名（字母数字下划线）"
                  },
                  "realName": {
                    "type": "string",
                    "description": "真实姓名"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "邮箱地址"
                  },
                  "phone": {
                    "type": "string",
                    "description": "手机号码"
                  },
                  "department": {
                    "type": "string",
                    "description": "部门"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "ADMIN",
                      "OPERATOR",
                      "AUDITOR"
                    ],
                    "description": "用户角色"
                  },
                  "password": {
                    "type": "string",
                    "description": "密码（必须包含大小写字母和数字）"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "用户创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 201
                    },
                    "message": {
                      "type": "string",
                      "example": "用户创建成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "参数错误或用户已存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "未登录",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/users": {
      "get": {
        "tags": [
          "用户管理"
        ],
        "summary": "获取用户列表",
        "description": "获取系统中所有用户的分页列表，支持条件查询。仅限ADMIN权限。",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "页码"
          },
          {
            "in": "query",
            "name": "size",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            },
            "description": "每页大小"
          },
          {
            "in": "query",
            "name": "role",
            "schema": {
              "type": "string",
              "enum": [
                "ADMIN",
                "OPERATOR",
                "AUDITOR"
              ]
            },
            "description": "用户角色"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "ACTIVE",
                "INACTIVE"
              ]
            },
            "description": "用户状态"
          },
          {
            "in": "query",
            "name": "keyword",
            "schema": {
              "type": "string"
            },
            "description": "关键字搜索（用户名、姓名、邮箱、部门）"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "获取成功"
                    },
                    "data": {
                      "allOf": [
                        {
                          "$ref": "#/components/schemas/PaginatedResponse"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "list": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/User"
                              }
                            }
                          }
                        }
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未登录",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/users/{userId}": {
      "get": {
        "tags": [
          "用户管理"
        ],
        "summary": "获取用户详情",
        "description": "根据用户ID获取用户详细信息。仅限ADMIN权限。",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "userId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "用户ID"
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "获取成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "用户ID无效",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "未登录",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "用户不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/users/{userId}/status": {
      "put": {
        "tags": [
          "用户管理"
        ],
        "summary": "更新用户状态",
        "description": "更新指定用户的状态（启用/禁用）。仅限ADMIN权限。",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "userId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "用户ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "status"
                ],
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE"
                    ],
                    "description": "用户状态"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "更新成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "number"
                        },
                        "username": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "ACTIVE",
                            "INACTIVE"
                          ]
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "未登录",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "用户不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/default-reasons": {
      "get": {
        "tags": [
          "违约原因管理"
        ],
        "summary": "查询违约原因列表",
        "description": "获取违约原因的分页列表，支持条件查询",
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "页码"
          },
          {
            "in": "query",
            "name": "size",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            },
            "description": "每页大小"
          },
          {
            "in": "query",
            "name": "reasonName",
            "schema": {
              "type": "string"
            },
            "description": "原因名称（模糊查询）"
          },
          {
            "in": "query",
            "name": "isEnabled",
            "schema": {
              "type": "boolean"
            },
            "description": "是否启用"
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "allOf": [
                        {
                          "$ref": "#/components/schemas/PaginatedResponse"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "list": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/DefaultReason"
                              }
                            }
                          }
                        }
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "违约原因管理"
        ],
        "summary": "创建违约原因",
        "description": "创建新的违约原因，需要ADMIN或OPERATOR权限",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "reason",
                  "detail"
                ],
                "properties": {
                  "reason": {
                    "type": "string",
                    "maxLength": 255,
                    "description": "违约原因名称"
                  },
                  "detail": {
                    "type": "string",
                    "description": "详细描述"
                  },
                  "enabled": {
                    "type": "boolean",
                    "default": true,
                    "description": "是否启用"
                  },
                  "sortOrder": {
                    "type": "integer",
                    "default": 0,
                    "description": "排序顺序"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 201
                    },
                    "message": {
                      "type": "string",
                      "example": "创建成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/DefaultReason"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/default-reasons/enabled": {
      "get": {
        "tags": [
          "违约原因管理"
        ],
        "summary": "查询启用的违约原因列表",
        "description": "获取所有启用状态的违约原因，用于申请时选择",
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "number"
                          },
                          "reason": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/default-reasons/{id}": {
      "get": {
        "tags": [
          "违约原因管理"
        ],
        "summary": "获取违约原因详情",
        "description": "根据ID获取违约原因的详细信息",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "违约原因ID"
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/DefaultReason"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "无效的ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "违约原因不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "违约原因管理"
        ],
        "summary": "更新违约原因",
        "description": "更新指定违约原因的信息，需要ADMIN或OPERATOR权限",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "违约原因ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "reason",
                  "detail"
                ],
                "properties": {
                  "reason": {
                    "type": "string",
                    "maxLength": 255,
                    "description": "违约原因名称"
                  },
                  "detail": {
                    "type": "string",
                    "description": "详细描述"
                  },
                  "enabled": {
                    "type": "boolean",
                    "description": "是否启用"
                  },
                  "sortOrder": {
                    "type": "integer",
                    "description": "排序顺序"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "更新成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/DefaultReason"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "参数验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "违约原因不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "违约原因管理"
        ],
        "summary": "删除违约原因",
        "description": "删除指定的违约原因，需要ADMIN权限",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "违约原因ID"
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "删除成功"
                    },
                    "data": {
                      "type": "object",
                      "nullable": true,
                      "example": null
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "违约原因不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "409": {
            "description": "违约原因正在被使用，无法删除",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/default-reasons/batch-status": {
      "post": {
        "tags": [
          "违约原因管理"
        ],
        "summary": "批量更新违约原因状态",
        "description": "批量启用或禁用违约原因，需要ADMIN权限",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "ids",
                  "enabled"
                ],
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": {
                      "type": "integer"
                    },
                    "minItems": 1,
                    "description": "违约原因ID列表"
                  },
                  "enabled": {
                    "type": "boolean",
                    "description": "启用状态"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "批量更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "批量更新成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "successCount": {
                          "type": "number",
                          "description": "成功更新数量"
                        },
                        "failCount": {
                          "type": "number",
                          "description": "失败更新数量"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/default-applications": {
      "post": {
        "tags": [
          "违约认定申请"
        ],
        "summary": "提交违约认定申请",
        "description": "创建新的违约认定申请（需要ADMIN或OPERATOR角色）",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "customerName",
                  "defaultReasons",
                  "severity"
                ],
                "properties": {
                  "customerName": {
                    "type": "string",
                    "description": "客户名称"
                  },
                  "latestExternalRating": {
                    "type": "string",
                    "description": "最新外部评级"
                  },
                  "defaultReasons": {
                    "type": "array",
                    "items": {
                      "type": "number"
                    },
                    "description": "违约原因ID列表"
                  },
                  "severity": {
                    "type": "string",
                    "enum": [
                      "HIGH",
                      "MEDIUM",
                      "LOW"
                    ],
                    "description": "严重程度"
                  },
                  "remark": {
                    "type": "string",
                    "description": "备注"
                  },
                  "attachments": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "fileName": {
                          "type": "string"
                        },
                        "fileUrl": {
                          "type": "string"
                        },
                        "fileSize": {
                          "type": "number"
                        }
                      }
                    },
                    "description": "附件列表"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "申请创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 201
                    },
                    "message": {
                      "type": "string",
                      "example": "申请创建成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/DefaultApplication"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "违约认定申请"
        ],
        "summary": "查询违约认定申请列表",
        "description": "获取违约认定申请的分页列表，支持条件查询。OPERATOR只能查看自己提交的申请。",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "页码"
          },
          {
            "in": "query",
            "name": "size",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            },
            "description": "每页大小"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "PENDING",
                "APPROVED",
                "REJECTED"
              ]
            },
            "description": "申请状态"
          },
          {
            "in": "query",
            "name": "customerName",
            "schema": {
              "type": "string"
            },
            "description": "客户名称（模糊查询）"
          },
          {
            "in": "query",
            "name": "applicant",
            "schema": {
              "type": "string"
            },
            "description": "申请人"
          },
          {
            "in": "query",
            "name": "severity",
            "schema": {
              "type": "string",
              "enum": [
                "HIGH",
                "MEDIUM",
                "LOW"
              ]
            },
            "description": "严重程度"
          },
          {
            "in": "query",
            "name": "startTime",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "开始时间"
          },
          {
            "in": "query",
            "name": "endTime",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "结束时间"
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "allOf": [
                        {
                          "$ref": "#/components/schemas/PaginatedResponse"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "list": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/DefaultApplication"
                              }
                            }
                          }
                        }
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/default-applications/{applicationId}": {
      "get": {
        "tags": [
          "违约认定申请"
        ],
        "summary": "获取违约认定申请详情",
        "description": "根据申请ID获取详细信息。OPERATOR只能查看自己提交的申请。",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "applicationId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "申请ID"
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "applicationId": {
                          "type": "string"
                        },
                        "customerId": {
                          "type": "number"
                        },
                        "customerName": {
                          "type": "string"
                        },
                        "latestExternalRating": {
                          "type": "string"
                        },
                        "defaultReasons": {
                          "type": "array",
                          "items": {
                            "type": "number"
                          }
                        },
                        "severity": {
                          "type": "string",
                          "enum": [
                            "HIGH",
                            "MEDIUM",
                            "LOW"
                          ]
                        },
                        "remark": {
                          "type": "string"
                        },
                        "attachments": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "fileName": {
                                "type": "string"
                              },
                              "fileUrl": {
                                "type": "string"
                              },
                              "fileSize": {
                                "type": "number"
                              }
                            }
                          }
                        },
                        "applicant": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "PENDING",
                            "APPROVED",
                            "REJECTED"
                          ]
                        },
                        "createTime": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "approveTime": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "approver": {
                          "type": "string"
                        },
                        "approveRemark": {
                          "type": "string"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "申请不存在或无权限访问",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/default-applications/{applicationId}/approve": {
      "post": {
        "tags": [
          "违约认定申请"
        ],
        "summary": "审核违约认定申请",
        "description": "审核单个违约认定申请，只有ADMIN和AUDITOR可以审核",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "applicationId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "申请ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "approved"
                ],
                "properties": {
                  "approved": {
                    "type": "boolean",
                    "description": "是否审核通过"
                  },
                  "remark": {
                    "type": "string",
                    "description": "审核备注"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "审核成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "审核成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "applicationId": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "APPROVED",
                            "REJECTED"
                          ]
                        },
                        "approver": {
                          "type": "string"
                        },
                        "approveTime": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "申请不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/default-applications/batch-approve": {
      "post": {
        "tags": [
          "违约认定申请"
        ],
        "summary": "批量审核违约认定申请",
        "description": "批量审核多个违约认定申请，只有ADMIN和AUDITOR可以审核",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "applications"
                ],
                "properties": {
                  "applications": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "applicationId",
                        "approved"
                      ],
                      "properties": {
                        "applicationId": {
                          "type": "string",
                          "description": "申请ID"
                        },
                        "approved": {
                          "type": "boolean",
                          "description": "是否审核通过"
                        },
                        "remark": {
                          "type": "string",
                          "description": "审核备注"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "批量审核完成",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "批量审核完成"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "successCount": {
                          "type": "number",
                          "description": "成功处理数量"
                        },
                        "failCount": {
                          "type": "number",
                          "description": "失败处理数量"
                        },
                        "details": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "applicationId": {
                                "type": "string"
                              },
                              "success": {
                                "type": "boolean"
                              },
                              "message": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/default-customers": {
      "get": {
        "tags": [
          "违约客户查询"
        ],
        "summary": "查询违约客户列表",
        "description": "获取违约客户的分页列表，支持条件查询。OPERATOR只能查看自己申请的违约客户。",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "页码"
          },
          {
            "in": "query",
            "name": "size",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            },
            "description": "每页大小"
          },
          {
            "in": "query",
            "name": "customerName",
            "schema": {
              "type": "string"
            },
            "description": "客户名称（模糊查询）"
          },
          {
            "in": "query",
            "name": "severity",
            "schema": {
              "type": "string",
              "enum": [
                "HIGH",
                "MEDIUM",
                "LOW"
              ]
            },
            "description": "严重程度"
          },
          {
            "in": "query",
            "name": "startTime",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "开始时间（按申请时间筛选）"
          },
          {
            "in": "query",
            "name": "endTime",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "结束时间（按申请时间筛选）"
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "allOf": [
                        {
                          "$ref": "#/components/schemas/PaginatedResponse"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "list": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/DefaultCustomer"
                              }
                            }
                          }
                        }
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/default-customers/export": {
      "get": {
        "tags": [
          "违约客户查询"
        ],
        "summary": "导出违约客户列表",
        "description": "导出违约客户数据为Excel文件。OPERATOR只能导出自己申请的违约客户。",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "customerName",
            "schema": {
              "type": "string"
            },
            "description": "客户名称（模糊查询）"
          },
          {
            "in": "query",
            "name": "severity",
            "schema": {
              "type": "string",
              "enum": [
                "HIGH",
                "MEDIUM",
                "LOW"
              ]
            },
            "description": "严重程度"
          },
          {
            "in": "query",
            "name": "startTime",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "开始时间（按申请时间筛选）"
          },
          {
            "in": "query",
            "name": "endTime",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "结束时间（按申请时间筛选）"
          }
        ],
        "responses": {
          "200": {
            "description": "导出成功",
            "content": {
              "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            },
            "headers": {
              "Content-Disposition": {
                "description": "附件文件名",
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "未授权"
          },
          "403": {
            "description": "权限不足"
          }
        }
      }
    },
    "/default-customers/renewable": {
      "get": {
        "tags": [
          "违约客户查询"
        ],
        "summary": "查询可续期客户列表",
        "description": "获取可以申请重生的违约客户列表，只有ADMIN和OPERATOR可以查看",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "页码"
          },
          {
            "in": "query",
            "name": "size",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            },
            "description": "每页大小"
          },
          {
            "in": "query",
            "name": "customerName",
            "schema": {
              "type": "string"
            },
            "description": "客户名称（模糊查询）"
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "allOf": [
                        {
                          "$ref": "#/components/schemas/PaginatedResponse"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "list": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/DefaultCustomer"
                              }
                            }
                          }
                        }
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/default-customers/{customerId}": {
      "get": {
        "tags": [
          "违约客户查询"
        ],
        "summary": "获取违约客户详情",
        "description": "根据客户ID获取违约客户的详细信息。OPERATOR只能查看自己申请的违约客户。",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "customerId",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "客户ID"
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/DefaultCustomer"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "违约客户不存在或无权限访问",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/renewal-reasons": {
      "get": {
        "tags": [
          "违约重生管理"
        ],
        "summary": "获取重生原因列表",
        "description": "获取所有启用的违约重生原因，用于创建重生申请时选择",
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "number",
                            "description": "重生原因ID"
                          },
                          "reason": {
                            "type": "string",
                            "description": "重生原因名称"
                          },
                          "enabled": {
                            "type": "boolean",
                            "description": "是否启用"
                          }
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/renewals": {
      "post": {
        "tags": [
          "违约重生管理"
        ],
        "summary": "提交违约重生申请",
        "description": "为违约客户提交重生申请，需要ADMIN或OPERATOR权限",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "customerId",
                  "renewalReason"
                ],
                "properties": {
                  "customerId": {
                    "type": "number",
                    "description": "违约客户ID"
                  },
                  "renewalReason": {
                    "type": "number",
                    "description": "重生原因ID"
                  },
                  "remark": {
                    "type": "string",
                    "maxLength": 1000,
                    "description": "申请备注"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "申请创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 201
                    },
                    "message": {
                      "type": "string",
                      "example": "申请创建成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "renewalId": {
                          "type": "string"
                        },
                        "customerId": {
                          "type": "number"
                        },
                        "customerName": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "PENDING"
                          ]
                        },
                        "createTime": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "参数错误或客户状态不符合要求",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "违约重生管理"
        ],
        "summary": "查询重生申请列表",
        "description": "获取重生申请的分页列表，支持条件查询。OPERATOR只能查看自己提交的申请。",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "页码"
          },
          {
            "in": "query",
            "name": "size",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            },
            "description": "每页大小"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "PENDING",
                "APPROVED",
                "REJECTED"
              ]
            },
            "description": "申请状态"
          },
          {
            "in": "query",
            "name": "customerName",
            "schema": {
              "type": "string"
            },
            "description": "客户名称（模糊查询）"
          },
          {
            "in": "query",
            "name": "applicant",
            "schema": {
              "type": "string"
            },
            "description": "申请人"
          },
          {
            "in": "query",
            "name": "startTime",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "开始时间"
          },
          {
            "in": "query",
            "name": "endTime",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "结束时间"
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "allOf": [
                        {
                          "$ref": "#/components/schemas/PaginatedResponse"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "list": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "renewalId": {
                                    "type": "string"
                                  },
                                  "customerId": {
                                    "type": "number"
                                  },
                                  "customerName": {
                                    "type": "string"
                                  },
                                  "renewalReason": {
                                    "type": "object",
                                    "properties": {
                                      "id": {
                                        "type": "number"
                                      },
                                      "reason": {
                                        "type": "string"
                                      }
                                    }
                                  },
                                  "status": {
                                    "type": "string",
                                    "enum": [
                                      "PENDING",
                                      "APPROVED",
                                      "REJECTED"
                                    ]
                                  },
                                  "remark": {
                                    "type": "string"
                                  },
                                  "applicant": {
                                    "type": "string"
                                  },
                                  "createTime": {
                                    "type": "string",
                                    "format": "date-time"
                                  },
                                  "approver": {
                                    "type": "string"
                                  },
                                  "approveTime": {
                                    "type": "string",
                                    "format": "date-time"
                                  },
                                  "approveRemark": {
                                    "type": "string"
                                  }
                                }
                              }
                            }
                          }
                        }
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/renewals/{renewalId}": {
      "get": {
        "tags": [
          "违约重生管理"
        ],
        "summary": "获取重生申请详情",
        "description": "根据申请ID获取详细信息。OPERATOR只能查看自己提交的申请。",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "renewalId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "重生申请ID"
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "查询成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "renewalId": {
                          "type": "string"
                        },
                        "customerId": {
                          "type": "number"
                        },
                        "customerName": {
                          "type": "string"
                        },
                        "customerInfo": {
                          "type": "object",
                          "properties": {
                            "industry": {
                              "type": "string"
                            },
                            "region": {
                              "type": "string"
                            },
                            "latestExternalRating": {
                              "type": "string"
                            }
                          }
                        },
                        "renewalReason": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "number"
                            },
                            "reason": {
                              "type": "string"
                            }
                          }
                        },
                        "originalDefaultReasons": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "number"
                              },
                              "reason": {
                                "type": "string"
                              }
                            }
                          }
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "PENDING",
                            "APPROVED",
                            "REJECTED"
                          ]
                        },
                        "remark": {
                          "type": "string"
                        },
                        "applicant": {
                          "type": "string"
                        },
                        "createTime": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "approver": {
                          "type": "string"
                        },
                        "approveTime": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "approveRemark": {
                          "type": "string"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "申请不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/renewals/{renewalId}/approve": {
      "post": {
        "tags": [
          "违约重生管理"
        ],
        "summary": "审核重生申请",
        "description": "审核单个违约重生申请，只有ADMIN和AUDITOR可以审核",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "renewalId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "重生申请ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "approved"
                ],
                "properties": {
                  "approved": {
                    "type": "boolean",
                    "description": "是否审核通过"
                  },
                  "remark": {
                    "type": "string",
                    "maxLength": 1000,
                    "description": "审核备注"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "审核成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "审核成功"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "renewalId": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "APPROVED",
                            "REJECTED"
                          ]
                        },
                        "approver": {
                          "type": "string"
                        },
                        "approveTime": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "申请不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/renewals/batch-approve": {
      "post": {
        "tags": [
          "违约重生管理"
        ],
        "summary": "批量审核重生申请",
        "description": "批量审核多个违约重生申请，只有ADMIN和AUDITOR可以审核",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "renewals"
                ],
                "properties": {
                  "renewals": {
                    "type": "array",
                    "minItems": 1,
                    "maxItems": 100,
                    "items": {
                      "type": "object",
                      "required": [
                        "renewalId",
                        "approved"
                      ],
                      "properties": {
                        "renewalId": {
                          "type": "string",
                          "description": "重生申请ID"
                        },
                        "approved": {
                          "type": "boolean",
                          "description": "是否审核通过"
                        },
                        "remark": {
                          "type": "string",
                          "maxLength": 1000,
                          "description": "审核备注"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "批量审核完成",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "number",
                      "example": 200
                    },
                    "message": {
                      "type": "string",
                      "example": "批量审核完成"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "successCount": {
                          "type": "number",
                          "description": "成功处理数量"
                        },
                        "failCount": {
                          "type": "number",
                          "description": "失败处理数量"
                        },
                        "details": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "renewalId": {
                                "type": "string"
                              },
                              "success": {
                                "type": "boolean"
                              },
                              "message": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "权限不足",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  }
}